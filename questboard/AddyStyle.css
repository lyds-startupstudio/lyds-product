:root{
  --color-white:#fff;
  --color-cream-50:#fcfcf9;
  --color-cream-100:#fffffd;
  --color-slate-500:#626c71;
  --color-slate-900:#13343b;
  --color-border:rgba(94,82,64,.2);
  --color-primary:#21808d;
  --color-primary-weak:#e8f1f2;
  --color-green:#10B981;
  --color-amber:#F59E0B;
  --color-purple:#7c3aed;

  --font: "Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;

  --radius-10:10px; --radius-12:12px; --radius-16:16px; --radius-18:18px; --radius-20:20px;
  --shadow-sm:0 1px 4px rgba(0,0,0,.06);
  --shadow-md:0 6px 18px rgba(0,0,0,.08);

  --belt-speed: 60s;
}

html,body{margin:0;padding:0;font-family:var(--font);color:var(--color-slate-900);background:var(--color-cream-50);}
.screen{display:none;width:100%;height:100vh;overflow:auto}
.screen.active{display:flex}

/* Setup */
#setupScreen{overflow:auto;background:var(--color-cream-50);justify-content:center;align-items:stretch}
.setup-container{width:100%;height:100vh;background:var(--color-cream-100);display:flex;flex-direction:column}
.setup-header{background:linear-gradient(135deg,#4F46E5,#8B5CF6);color:#fff;padding:24px 32px;text-align:center;position:relative}
.setup-topbar{position:absolute;right:16px;top:16px;display:flex;gap:8px}
.setup-title{font-size:24px;margin:8px 0}
.progress-bar{height:4px;background:rgba(255,255,255,.25);border-radius:999px;overflow:hidden}
.progress-fill{height:100%;background:#fff;width:0;transition:width .25s}
.setup-content{flex:1;max-width:800px;margin:0 auto;padding:24px 32px;display:flex;flex-direction:column;overflow:visible;min-height:0}
.step{display:none}.step.active{display:flex;flex-direction:column;animation:fade .2s}
@keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.step-title{text-align:center;margin-bottom:16px;font-weight:700}
.auth-hint{margin-top:8px;text-align:center;font-size:12px;opacity:.9}
.option-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}
.option-card{background:var(--color-cream-100);border:2px solid var(--color-border);border-radius:var(--radius-16);padding:20px;text-align:center;cursor:pointer;transition:.2s}
.option-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm);border-color:#4F46E5}
.option-card.selected{background:rgba(79,70,229,.06);border-color:#4F46E5}
.form-group{margin-bottom:12px}
.form-label{display:block;margin-bottom:6px;font-weight:600}
.tag-input-container{display:flex;flex-wrap:wrap;gap:8px;padding:8px;border:2px solid var(--color-border);border-radius:var(--radius-12)}
.tag{background:#4F46E5;color:#fff;padding:2px 8px;border-radius:10px;font-size:12px;display:inline-flex;align-items:center;gap:6px}
.tag-remove{border:none;background:rgba(255,255,255,.3);color:#fff;width:16px;height:16px;border-radius:999px;cursor:pointer}
.tag-input{border:none;outline:none;min-width:120px;flex:1;padding:8px}
.button-group{position:sticky;bottom:0;background:var(--color-cream-100);padding-top:12px;margin-top:auto;border-top:1px solid var(--color-border);box-shadow:0 -6px 10px rgba(0,0,0,.04);display:flex;justify-content:space-between}
.btn{border:none;border-radius:10px;padding:8px 16px;cursor:pointer;font-weight:600}
.btn-primary{background:#4F46E5;color:#fff}
.btn-primary:disabled{opacity:.6;cursor:not-allowed}
.btn-secondary{background:#e5e7eb;color:#111827}
.btn-sm{padding:6px 10px;font-size:12px;border-radius:8px}
.btn--primary{background:var(--color-primary);color:#fff}
.btn-auth{background:#fff;color:#111827}

/* Avatar */
#avatarScreen{background:linear-gradient(135deg,#4F46E5,#8B5CF6);justify-content:center;align-items:flex-start;color:#fff;overflow:auto;padding:20px 0}
.avatar-creation-container{width:100%;max-width:520px;padding:20px;overflow:visible;min-height:calc(100vh - 40px);display:flex;align-items:flex-start;justify-content:center;box-sizing:border-box}
.avatar-card{background:rgba(255,255,255,.96);color:var(--color-slate-900);border-radius:18px;padding:24px 24px 28px;box-shadow:0 20px 50px rgba(0,0,0,.12);position:relative;width:100%;max-height:none;overflow:visible}
.back-link{position:absolute;top:12px;left:12px;background:none;border:none;color:#6b7280;cursor:pointer}
.avatar-title{text-align:center;color:#5839e5;margin-bottom:8px}
.form-control{width:100%;padding:10px 12px;border:1px solid var(--color-border);border-radius:10px;background:var(--color-cream-100)}
.form-control--sm{padding:6px 10px;font-size:12px}
.avatar-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:12px 0}
.avatar-option{width:60px;height:60px;border-radius:999px;border:3px solid transparent;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;background:#eef2ff;transition:.2s}
.avatar-option:hover{transform:scale(1.06);border-color:#4F46E5}
.avatar-option.selected{border-color:#4F46E5;background:rgba(79,70,229,.08)}
.avatar-actions{display:flex;gap:12px;margin-top:16px}
.quest-button{flex:1;position:relative;overflow:hidden}
.button-shine{position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.35),transparent);transition:left .5s}
.quest-button:hover .button-shine{left:100%}
.avatar-auth-block{margin:8px 0 4px 0; padding:10px 12px; border:1px dashed #d7d9e2; border-radius:10px; background:#fafbff}

/* Office */
#platformScreen{background:#F8FAFC;flex-direction:column}
.platform-container{height:100vh;display:flex;flex-direction:column}
.top-nav{background:#fff;height:70px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;border-bottom:1px solid var(--color-border);box-shadow:var(--shadow-sm)}
.user-info{display:flex;align-items:center;gap:12px}
.user-avatar-nav{width:40px;height:40px;border-radius:999px;display:flex;align-items:center;justify-content:center;border:2px solid #4F46E5}
.user-details{display:flex;flex-direction:column}
.user-role{font-size:12px;color:#6b7280}
.stat-item{text-align:center}.stat-value{font-weight:800;color:#4F46E5}
.office-layout{flex:1;position:relative;overflow:auto}
.office-map{width:100%;height:100%;position:relative;background:linear-gradient(45deg,#F8FAFC 25%,transparent 25%,transparent 75%,#F8FAFC 75%,#F8FAFC),linear-gradient(45deg,#F8FAFC 25%,transparent 25%,transparent 75%,#F8FAFC 75%,#F8FAFC);background-size:20px 20px;background-position:0 0,10px 10px}
.user-character{position:absolute;width:60px;height:80px;left:50%;top:50%;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;z-index:50}
.character-avatar{width:50px;height:50px;border-radius:999px;background:#fff;border:3px solid #4F46E5;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:var(--shadow-sm)}
.character-name{margin-top:4px;font-size:11px;background:#fff;padding:2px 6px;border-radius:6px;box-shadow:var(--shadow-sm)}
.team-room{position:absolute;width:200px;height:150px;border-radius:16px;border:3px solid;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:.2s;box-shadow:0 8px 25px rgba(0,0,0,.06)}
.team-room:hover{transform:scale(1.02)}
.room-header{font-weight:800;margin-bottom:6px}
.room-members{display:flex;gap:4px;margin-bottom:6px}
.room-member{width:28px;height:28px;border-radius:999px;background:#fde68a;display:flex;align-items:center;justify-content:center;font-size:14px}
.room-enter{font-size:12px;color:#6b7280;background:rgba(255,255,255,.9);padding:4px 8px;border-radius:8px;opacity:0;transition:opacity .2s}
.side-panel{position:absolute;top:80px;right:20px;width:260px;max-height:calc(100vh - 180px);display:flex;flex-direction:column;gap:12px;overflow-y:auto;z-index:90}
.side-section{background:#fff;border:1px solid var(--color-border);border-radius:16px;padding:12px;box-shadow:var(--shadow-sm)}
.section-title{font-weight:800;font-size:14px;margin-bottom:8px}
.sidebar-list{display:flex;flex-direction:column;gap:6px;max-height:300px;overflow-y:auto}

.team-item{padding:8px 10px;border-radius:10px;background:#f3f4f6;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
.team-item:hover{background:#e5e7eb}
.team-percentage{font-weight:800;color:#4F46E5;font-size:14px}

.employee-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:12px;border:1px solid transparent;cursor:pointer}
.employee-item:hover{background:#f9fafb;border-color:var(--color-border)}
.emp-avatar{width:28px;height:28px;border-radius:999px;display:flex;align-items:center;justify-content:center;background:#eef2ff;font-size:16px}
.emp-info{display:flex;flex-direction:column}
.emp-name{font-weight:700;font-size:13px}
.emp-meta{font-size:12px;color:#6b7280}
.lead-star{font-size:12px}
.emp-points{font-size:11px;color:#10B981;font-weight:700;margin-left:6px}

/* floating buttons in office */
/* Office action buttons - single row layout */
.office-action-buttons {
  position: absolute;
  bottom: 20px;
  right: 20px;
  z-index: 101;
  display: flex;
  gap: 10px;
  align-items: center;
}

.office-action-buttons .btn {
  white-space: nowrap;
  margin: 0 !important;
  position: static !important;
}

/* Team */
#teamScreen{background:#F8FAFC;flex-direction:column;overflow:auto}
.team-container{height:100vh;display:flex;flex-direction:column;min-height:100vh;overflow:visible}
.team-header{background:#fff;padding:16px 20px;border-bottom:1px solid var(--color-border);display:flex;align-items:center;gap:20px;box-shadow:var(--shadow-sm)}
.back-button{background:#e5e7eb;border:none;padding:8px 12px;border-radius:10px;cursor:pointer}
.team-title{font-size:28px;margin-bottom:6px}
.team-actions{margin-left:auto;display:flex;gap:10px;align-items:center}
.add-task-header-btn{background:#4F46E5;color:#fff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer}
.manage-events-btn{background:#e5e7eb;color:#111827;border:none;padding:8px 12px;border-radius:10px;cursor:pointer}

/* Backlog belt */
.backlog-belt{padding:14px 20px 4px}
.belt-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.belt-left{display:flex;align-items:baseline;gap:10px}
.belt-title{font-weight:800;font-size:18px}
.belt-hint{font-size:12px;color:#6b7280}
.belt-right{display:flex;align-items:center;gap:8px}
.belt-count{background:#0f172a;color:#fff;border-radius:999px;min-width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:12px}
.belt-viewport{position:relative;background:linear-gradient(180deg,rgba(255,255,255,.96),rgba(255,255,255,.92));border:1px solid #e8e8ec;border-radius:20px;overflow:hidden}
.belt-track{display:flex;gap:12px;align-items:stretch;padding:12px;animation: belt-scroll var(--belt-speed) linear infinite;white-space:nowrap}
.belt-viewport[data-paused="true"] .belt-track{animation:none;flex-wrap:wrap;overflow-y:auto;max-height:300px}
@keyframes belt-scroll{ from{ transform:translateX(100%) } to{ transform:translateX(-50%) } }
.belt-viewport.drag-over{outline:2px dashed #4F46E5; outline-offset:-6px; border-radius:16px;}

/* Board (other columns) */
.kanban-board{flex:1;display:grid;grid-template-columns:repeat(4,1fr);gap:20px;padding:12px 20px 20px;overflow:auto;min-height:0}
.kanban-column{
  background:linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.92));
  border:1px solid #e8e8ec;border-radius:20px;box-shadow:var(--shadow-sm);display:flex;flex-direction:column
}
.column-header{padding:14px 16px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #eef0f3;border-radius:20px 20px 0 0;background:linear-gradient(180deg, rgba(248,249,255,0.55), rgba(255,255,255,0.25))}
.column-left{display:flex;flex-direction:column}
.column-title{font-weight:800;letter-spacing:.2px}
.column-count{background:#0f172a;color:#fff;border-radius:999px;min-width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:12px}
.column-right{display:flex;align-items:center;gap:8px}
.add-task-column-btn{background:#4F46E5;color:#fff;border:none;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px;font-weight:bold}
.add-task-column-btn:hover{background:#3730a3}
.column-content{flex:1;padding:14px;display:flex;flex-direction:column;gap:12px;overflow-y:auto;max-height:calc(100vh - 300px)}
.column-content.drag-over{outline:2px dashed #4F46E5; outline-offset:-6px; border-radius:16px; background:rgba(79,70,229,.04)}

/* Task card */
.task-card{
  background: linear-gradient(180deg, #ffffff, #fbfbfe);
  border:1px solid #e7e9f1;border-radius:18px;box-shadow:0 1px 0 rgba(255,255,255,.8) inset, var(--shadow-sm);
  padding:14px 14px 12px;cursor:grab;position:relative;min-width:200px
}
.task-mini{padding:10px 12px;min-width:220px}
.task-card.dragging{transform:rotate(2deg);box-shadow:0 10px 22px rgba(0,0,0,.15)}
.task-title-lg{font-weight:800;font-size:16px;margin-bottom:8px}
.task-status-row{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.task-status-text{font-size:12px;color:#6b7280}
.pill{display:inline-flex;align-items:center;gap:6px;height:22px;padding:0 8px;border-radius:999px;font-size:11px;font-weight:700;border:1px solid transparent;background:#f1f5f9;color:#0f172a}
.pill::before{content:'';width:6px;height:6px;border-radius:999px;background:#64748b}
.pill--warning{background:#fff7ed;color:#92400e;border-color:#fde68a}
.pill--warning::before{background:#f59e0b}
.pill--success{background:#ecfdf5;color:#065f46;border-color:#a7f3d0}
.pill--success::before{background:#10b981}
.task-description{font-size:12px;color:#6b7280;margin-bottom:10px}
.task-footer{display:flex;justify-content:space-between;align-items:center}
.task-points{font-weight:800;font-size:12px;background:var(--color-primary-weak);color:#0b3d44;padding:4px 8px;border-radius:999px}
.task-assignee{width:26px;height:26px;border-radius:999px;background:#eef2ff;display:flex;align-items:center;justify-content:center;border:1px solid #e5e7eb;font-size:14px}

/* Approve button on waiting */
.approve-button{position:absolute;right:10px;bottom:10px;background:#10B981;color:#fff;border:none;border-radius:10px;padding:6px 10px;cursor:pointer;font-size:12px;box-shadow:var(--shadow-sm)}
.approve-button:hover{filter:brightness(.95)}

/* Team members (top header in team screen) */
.team-members{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.team-member{display:flex;gap:8px;align-items:center;background:#fff;border:1px solid #edf0f5;padding:6px 10px;border-radius:12px;box-shadow:var(--shadow-sm)}
.member-avatar{width:28px;height:28px;border-radius:999px;background:#eef2ff;display:flex;align-items:center;justify-content:center}
.member-info{display:flex;flex-direction:column}
.member-name{font-weight:700;font-size:13px}
.member-role{font-size:12px;color:#6b7280}

/* ===== Modals ===== */
.modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    animation: modalFade 0.12s;
    padding: 20px;
    box-sizing: border-box;
}

.modal.hidden { 
    display: none; 
}

@keyframes modalFade {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.18);
    width: min(92vw, 560px);
    max-height: calc(100vh - 40px);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    margin: auto;
    position: relative;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 16px;
    border-bottom: 1px solid #eef0f3;
    background: linear-gradient(180deg, rgba(248,249,255,0.55), rgba(255,255,255,0.25));
    flex-shrink: 0;
}

.modal-header h3 {
    margin: 0;
    font-size: 18px;
}

.modal-close {
    border: none;
    background: #e5e7eb;
    border-radius: 10px;
    padding: 6px 10px;
    cursor: pointer;
    font-size: var(--font-size-2xl);
    color: var(--color-text-secondary);
    width: 32px;
    height: 32px;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.2s;
}

.modal-close:hover {
    background: #d1d5db;
}

.modal-content > div {
    padding: 14px 16px;
    overflow-y: auto;
    flex: 1;
    max-height: calc(100vh - 120px);
}

.modal-form {
    overflow-y: auto;
    flex: 1;
    max-height: calc(100vh - 140px);
}

.modal-form .form-group {
    margin-bottom: 12px;
}

.modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    margin-top: 12px;
    flex-shrink: 0;
}

.assign-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.assign-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    border: 1px solid #edf0f5;
    border-radius: 10px;
}

.events-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.small-hint {
    margin-top: 6px;
    font-size: 12px;
    color: #6b7280;
}

/* ==== Password reset modals ==== */
.modal-card {
    width: min(520px, 92vw);
    background: #fff;
    color: #111;
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
    padding: 20px 22px;
    outline: none;
    position: relative;
}

.modal-desc {
    margin: 6px 0 14px;
    color: #555;
}

.form-row {
    display: block;
    margin: 10px 0;
}

.form-row input {
    width: 100%;
}

.inline {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin-top: 6px;
}

.modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 14px;
}

/* Recovery dialogs */
#dialog-extra-verify,
#dialog-reset-pwd {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
}

#dialog-extra-verify .modal-card,
#dialog-reset-pwd .modal-card {
    position: relative;
    margin: auto;
    max-width: 720px;
    z-index: 10001;
}

/* Modal Overlay for Store */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
}

.modal-overlay.show {
    display: flex;
}

/* Celebration overlay */
.celebration-overlay{position:fixed;inset:0;background:rgba(0,0,0,.25);display:flex;align-items:center;justify-content:center;z-index:3000;animation:modalFade .12s;overflow:hidden}
.celebration-content{background:#fff;border-radius:18px;padding:28px 32px;box-shadow:0 20px 60px rgba(0,0,0,.18);text-align:center;position:relative;z-index:3001}
.celebration-text{font-weight:800;font-size:24px;color:#4F46E5;margin-bottom:12px}
.celebration-points{font-weight:800;font-size:32px;color:#10B981}

/* Fireworks animation */
.firework{position:absolute;width:8px;height:8px;border-radius:50%;animation:explode 1s ease-out forwards;z-index:3000}
.firework::before,.firework::after{content:'';position:absolute;width:100%;height:100%;border-radius:50%}

@keyframes explode{
  0%{transform:scale(0);opacity:1;box-shadow:0 0 0 0 #F59E0B,0 0 0 0 #EF4444,0 0 0 0 #10B981,0 0 0 0 #3B82F6,0 0 0 0 #8B5CF6,0 0 0 0 #EC4899}
  50%{opacity:1}
  100%{transform:scale(8);opacity:0;box-shadow:60px 0 20px 8px #F59E0B,-60px 0 20px 8px #EF4444,0 60px 20px 8px #10B981,0 -60px 20px 8px #3B82F6,40px 40px 20px 8px #8B5CF6,-40px -40px 20px 8px #EC4899}
}

/* Utilities / states */
.empty{color:#9aa1a6;font-size:13px}
.logo{font-weight:900;letter-spacing:.3px}
.user-name{font-weight:700}
.stat-label{display:block;font-size:11px;color:#6b7280}

/* Scrollbars (subtle) */
.sidebar-list::-webkit-scrollbar,
.column-content::-webkit-scrollbar,
.modal-content>div::-webkit-scrollbar,
.belt-track::-webkit-scrollbar{width:8px;height:8px}
.sidebar-list::-webkit-scrollbar-thumb,
.column-content::-webkit-scrollbar-thumb,
.modal-content>div::-webkit-scrollbar-thumb,
.belt-track::-webkit-scrollbar-thumb{background:#e5e7eb;border-radius:999px}

/* ====== Auth Blocks (new login/register UIs) ====== */
.auth-inline{display:flex;gap:8px;justify-content:center;margin-top:10px}
.auth-inline .btn{padding:6px 10px}

/* ====== Toasts ====== */
.toast{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#0f172a;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:var(--shadow-md);z-index:5000;opacity:0;animation:toastIn .2s forwards}
@keyframes toastIn{to{opacity:1}}
.toast.success{background:#16a34a}
.toast.warn{background:#f59e0b}
.toast.error{background:#dc2626}

/* ====== Login Panels on Office ====== */
.login-panel{position:absolute;top:20px;left:20px;background:#fff;border:1px solid var(--color-border);border-radius:16px;padding:12px 14px;box-shadow:var(--shadow-sm);z-index:150}
.login-panel h4{margin:0 0 8px 0}
.login-row{display:flex;gap:6px;align-items:center;margin-top:6px}
.login-row input{padding:6px 8px;border:1px solid #e5e7eb;border-radius:8px}

/* ====== Belt Pause Button ====== */
.belt-pause{background:#e5e7eb;border:none;border-radius:999px;padding:6px 10px;cursor:pointer}
.belt-pause.active{background:#0f172a;color:#fff}

/* ====== Drag Ghost ====== */
.drag-ghost{opacity:.85;transform:rotate(3deg);}

/* ====== Event Badges ====== */
.event-badge{display:inline-flex;align-items:center;gap:6px;background:#eef2ff;border:1px solid #e5e7eb;border-radius:999px;padding:4px 8px;font-size:12px}

/* ====== Board Review Column (new) ====== */
.board-review .column-title::after{content:" (Lead approval)";font-weight:400;color:#6b7280;font-size:12px}

/* ====== Disabled state ====== */
.disabled{opacity:.6;pointer-events:none}

/* ====== Helper texts ====== */
.help{font-size:12px;color:#6b7280}

/* ====== Overflow fixes (mobile) ====== */
@media (max-width: 920px){
  .option-grid{grid-template-columns:1fr}
  .side-panel{position:static;width:auto;max-height:none;margin:12px}
  .kanban-board{grid-template-columns:1fr;gap:12px}
  .belt-viewport[data-paused="true"] .belt-track{max-height:none}
}

/* ====== Team Room States ====== */
.team-room[data-active="true"]{border-color:#4F46E5}
.team-room[data-active="true"] .room-enter{opacity:1}

/* ====== Points Pop ====== */
.points-pop{position:absolute;right:8px;top:-6px;background:#10B981;color:#fff;padding:2px 6px;border-radius:999px;font-size:11px;font-weight:800;box-shadow:var(--shadow-sm);animation:popFade 1.2s ease-out forwards}
@keyframes popFade{0%{opacity:0;transform:translateY(6px)}15%{opacity:1;transform:none}85%{opacity:1}100%{opacity:0;transform:translateY(-10px)}}

/* ====== Room Grid (if more than 5 teams) ====== */
.rooms-grid{position:absolute;inset:0;padding:22px;display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:18px;overflow:auto}
.rooms-grid .team-room{position:static}

/* ====== Event Modal Small Items ====== */
.event-item{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border:1px solid #edf0f5;border-radius:10px}
.event-item .label{font-weight:600}
.event-item .when{font-size:12px;color:#6b7280}

/* ====== Search in side panel ====== */
.side-search{display:flex;gap:6px;margin-bottom:8px}
.side-search input{flex:1;padding:8px;border:1px solid #e5e7eb;border-radius:10px}

/* ====== Counters ====== */
.counter{display:inline-flex;align-items:center;gap:6px;background:#f3f4f6;border:1px solid #e5e7eb;border-radius:999px;padding:4px 8px;font-size:12px}
.counter .dot{width:6px;height:6px;border-radius:999px;background:#16a34a}
.counter.warn .dot{background:#f59e0b}
.counter.danger .dot{background:#dc2626}

/* ====== Sticky headers for lists ====== */
.sidebar-list .subheader{position:sticky;top:0;background:#fff;border-bottom:1px solid #edf0f5;padding:6px 8px;font-weight:800}

/* ====== Tooltip (simple) ====== */
.tooltip{position:relative}
.tooltip .tip{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:#0f172a;color:#fff;font-size:12px;padding:6px 8px;border-radius:8px;white-space:nowrap;opacity:0;pointer-events:none;transition:.15s;box-shadow:var(--shadow-sm)}
.tooltip:hover .tip{opacity:1}

/* ====== Mini badges on tasks ====== */
.badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.badge{font-size:10px;padding:2px 6px;border-radius:999px;background:#eef2ff;border:1px solid #e5e7eb}
.badge.urgent{background:#fff7ed;border-color:#fde68a;color:#92400e}
.badge.points{background:#ecfdf5;border-color:#a7f3d0;color:#065f46}

/* ====== Auth Modal (employee login) ====== */
.auth-note{font-size:12px;color:#6b7280;margin-top:6px}

/* ====== Buttons palette ====== */
.btn-ghost{background:transparent;border:1px solid #e5e7eb}
.btn-ghost:hover{background:#f9fafb}
.btn-success{background:#16a34a;color:#fff}
.btn-success:hover{filter:brightness(.98)}
.btn-warning{background:#f59e0b;color:#111827}
.btn-warning:hover{filter:brightness(.98)}
.btn-danger{background:#dc2626;color:#fff}
.btn-danger:hover{filter:brightness(.98)}

/* ====== Inputs ====== */
.input{padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
.input:focus{outline:none;border-color:#4F46E5;box-shadow:0 0 0 3px rgba(79,70,229,.15)}

/* ====== Labels ====== */
.label{font-weight:700;font-size:12px;color:#374151;margin-bottom:4px;display:block}

/* ====== Toggle ====== */
.toggle{position:relative;width:44px;height:24px;background:#e5e7eb;border-radius:999px;cursor:pointer}
.toggle::after{content:"";position:absolute;left:3px;top:3px;width:18px;height:18px;border-radius:999px;background:#fff;transition:.15s}
.toggle[data-on="true"]{background:#4F46E5}
.toggle[data-on="true"]::after{left:23px}

/* ====== Footer buttons on team screen ====== */
.team-footer{display:flex;gap:8px;align-items:center;justify-content:flex-end;padding:10px 20px;border-top:1px solid #edf0f5;background:#fff}
.team-footer .hint{margin-right:auto;font-size:12px;color:#6b7280}

/* ====== Filter bar ====== */
.filter-bar{display:flex;gap:8px;align-items:center;padding:8px 20px;background:#fff;border-top:1px solid #edf0f5;border-bottom:1px solid #edf0f5}

/* ====== Mini modal (confirm) ====== */
.confirm{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);z-index:4000}
.confirm .box{background:#fff;border-radius:16px;padding:16px 18px;box-shadow:0 20px 60px rgba(0,0,0,.18);width:min(92vw,420px)}
.confirm .box .title{font-weight:800;margin-bottom:8px}
.confirm .box .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}

/* ====== Search highlight ====== */
.highlight{background:#fef3c7}

/* ====== Mini tabs ====== */
.tabs{display:flex;gap:6px;background:#f8fafc;border:1px solid #e5e7eb;border-radius:10px;padding:4px}
.tab{padding:6px 10px;border-radius:8px;cursor:pointer}
.tab.active{background:#fff;box-shadow:var(--shadow-sm);border:1px solid #e5e7eb}

/* ====== Header stat chips ====== */
.stat-chip{display:inline-flex;align-items:center;gap:6px;background:#eef2ff;border:1px solid #e5e7eb;border-radius:999px;padding:4px 8px;font-size:12px}

/* ====== Event calendar placeholder ====== */
.calendar{border:1px dashed #d1d5db;border-radius:12px;padding:12px;color:#6b7280;text-align:center}

/* ====== Print helpers ====== */
@media print{
  .top-nav,.side-panel,.team-footer,.filter-bar{display:none}
  .kanban-board{grid-template-columns:1fr 1fr}
  .task-card{break-inside:avoid}
}

/* ====== Focus visible ====== */
:focus-visible{outline:2px solid #4F46E5;outline-offset:2px}

/* ====== Small danger button (overrides) ====== */
.btn-danger {
  background: #dc2626;
  color: #fff;
  border: none;
  padding: 8px 16px;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
}

.btn-danger:hover {
  background: #b91c1c;
}

/* ====== Enhanced Scrolling Support ====== */
/* Ensure long employee lists can scroll */
#sidebarEmployeeList {
  max-height: 400px;
  overflow-y: auto;
}

/* Task details modal specific scrolling */
.task-detail-section {
  margin-bottom: 16px;
}

/* Mobile responsive scrolling */
@media (max-height: 600px) {
  .modal-content {
    max-height: 95vh;
  }
  
  .modal-content > div {
    max-height: calc(95vh - 50px);
  }
  
  .avatar-creation-container {
    min-height: auto;
    padding: 16px;
  }
  
  .column-content {
    max-height: calc(100vh - 250px);
  }
}

/* Smooth scrolling for better UX */
html {
  scroll-behavior: smooth;
}

.modal-content > div,
.sidebar-list,
.column-content,
.belt-track {
  scroll-behavior: smooth;
}

/* ==== Password reset modals ==== */
.modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 14px; }
.btn-link { background: none; border: none; padding: 0; text-decoration: underline; cursor: pointer; font: inherit; }

.req-list { margin: 10px 0 0; padding-left: 18px; }
.req-list li { margin: 4px 0; }
.req-list li.ok { color: #1a7f37; font-weight: 600; }
.req-list li.bad { color: #b42318; }

.neutral-hint { margin-top: 8px; color: #666; font-size: 13px; }

/* Focus outlines for a11y (modal focus trapping per APG dialog guidance) */
button:focus, input:focus { outline: 2px solid #3b82f6; outline-offset: 2px; }

/* ===== Recovery dialogs should sit above any JS modal ===== */
/* #dialog-extra-verify,
#dialog-reset-pwd {
  position: fixed;    /* attach to viewport, not to any container */
  /* inset: 0;           /* top/right/bottom/left: 0 */
  /* z-index: 2000;      /* higher than your JS modals (which are ~1000â€“1500) */
/* } */

/* #dialog-extra-verify .modal-card,
#dialog-reset-pwd .modal-card {
  position: relative;
  margin: 4rem auto; */
  /* max-width: 720px;   /* keep your look & feel */
  /* z-index: 2001;      /*above their own overlay */
/* }  */

/* If you have a generic .modal overlay already, make sure it's lower */
/* .modal { z-index: 1000; } your JS-created buildModal() instances */

/* Make sure verification/reset dialogs are always above other modals */
/* #dialog-extra-verify,
#dialog-reset-pwd {
  position: fixed;
  inset: 0;
  z-index: 10000;
} */

.btn-icon {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  transition: background 0.2s;
  margin-right: 8px;
}

.btn-icon:hover {
  background: rgba(0,0,0,0.05);
}

.btn-icon svg {
  display: block;
}

/* tiny shake helper for a neutral error cue */
.modal-card.shake {
  animation: qb-shake 0.25s linear 1;
}
@keyframes qb-shake {
  0%,100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  75% { transform: translateX(4px); }
}

/* optional: subtle error text */
#ev-error { color: var(--color-text-secondary); }

/* Office action buttons - single row layout */
.office-action-buttons {
  position: absolute;
  bottom: 20px;
  right: 20px;
  z-index: 101;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  max-width: 600px;
}

.office-action-buttons .btn {
  white-space: nowrap;
}

:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* Typography */
  --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
/* =========================== CUSTOMIZATION STORE STYLES =========================== */

#customizationScreen {
    flex-direction: column;
    padding: 0;
    background: var(--color-background);
}

.customization-container {
    width: 100%;
    height: 100vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

/* Header Styles */
.customization-header {
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    padding: var(--space-20);
    box-shadow: var(--shadow-sm);
    position: sticky;
    top: 0;
    z-index: 100;
}

.back-to-platform-btn {
    background: var(--color-primary);
    color: var(--color-btn-primary-text);
    border: none;
    padding: var(--space-8) var(--space-16);
    border-radius: var(--radius-md);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family-base);
    cursor: pointer;
    margin-bottom: var(--space-16);
    transition: all var(--duration-fast) var(--ease-standard);
}

.back-to-platform-btn:hover {
    background: var(--color-primary-hover);
    transform: translateX(-2px);
}

.back-to-platform-btn:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.store-title {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin: 0 0 var(--space-8) 0;
    text-align: center;
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tight);
    font-family: var(--font-family-base);
}

.motivational-quote {
    font-size: var(--font-size-xl);
    font-style: italic;
    color: var(--color-text-secondary);
    text-align: center;
    margin-bottom: var(--space-24);
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family-base);
}

.user-stats {
    display: flex;
    justify-content: center;
    gap: var(--space-32);
    margin-bottom: var(--space-20);
    flex-wrap: wrap;
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-4);
}

.stat-label {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family-base);
}

.stat-value {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
    font-family: var(--font-family-base);
}

.level-title {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    font-style: italic;
    font-family: var(--font-family-base);
}

.progress-section {
    max-width: 400px;
    margin: 0 auto;
    width: 100%;
}

.progress-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: var(--space-8);
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    font-family: var(--font-family-base);
}

.progress-bar {
    height: var(--space-8);
    background: var(--color-gray-200);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--color-primary), var(--color-teal-300));
    transition: width var(--duration-normal) var(--ease-standard);
    border-radius: var(--radius-md);
}

/* Department Navigation */
.department-nav {
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    padding: 0 var(--space-20);
    position: sticky;
    top: 200px;
    z-index: 90;
}

.department-buttons {
    display: flex;
    gap: 0;
    max-width: var(--container-xl);
    margin: 0 auto;
}

.department-btn {
    background: none;
    border: none;
    padding: var(--space-16) var(--space-24);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    font-family: var(--font-family-base);
    color: var(--color-text-secondary);
    cursor: pointer;
    border-bottom: 3px solid transparent;
    transition: all var(--duration-fast) var(--ease-standard);
}

.department-btn:hover {
    color: var(--color-primary);
    background: var(--color-secondary);
}

.department-btn:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.department-btn.active {
    color: var(--color-primary);
    border-bottom-color: var(--color-primary);
    background: var(--color-secondary);
}

/* Store Content */
.store-content {
    flex: 1;
    padding: var(--space-32) var(--space-20);
    max-width: var(--container-xl);
    margin: 0 auto;
    width: 100%;
}

.department {
    display: none;
}

.department.active {
    display: block;
}

.department-header {
    text-align: center;
    margin-bottom: var(--space-32);
}

.department-header h2 {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin: 0 0 var(--space-12) 0;
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tight);
    font-family: var(--font-family-base);
}

.department-header p {
    font-size: var(--font-size-xl);
    color: var(--color-text-secondary);
    margin: 0;
    font-family: var(--font-family-base);
}

/* Category Filters */
.category-filters {
    display: flex;
    justify-content: center;
    gap: var(--space-12);
    margin-bottom: var(--space-32);
    flex-wrap: wrap;
}

.category-filter {
    background: var(--color-surface);
    border: 2px solid var(--color-border);
    padding: var(--space-12) var(--space-20);
    border-radius: var(--radius-full);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    font-family: var(--font-family-base);
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-standard);
}

.category-filter:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.category-filter:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.category-filter.active {
    background: var(--color-primary);
    border-color: var(--color-primary);
    color: var(--color-btn-primary-text);
}

/* Items Grid */
.items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: var(--space-24);
    margin-bottom: var(--space-32);
}

.store-item {
    background: var(--color-surface);
    border: 2px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-24);
    transition: all var(--duration-normal) var(--ease-standard);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    min-height: 280px;
}

.store-item:hover {
    border-color: var(--color-primary);
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
}

.store-item.current {
    border-color: var(--color-success);
    background: rgba(var(--color-success-rgb), 0.05);
}

.store-item.owned {
    border-color: var(--color-teal-300);
    background: rgba(var(--color-teal-500-rgb), 0.05);
}

.store-item.locked {
    opacity: 0.6;
    border-color: var(--color-gray-300);
    background: var(--color-gray-200);
}

.store-item.insufficient {
    border-color: var(--color-error);
    background: rgba(var(--color-error-rgb), 0.05);
}

.item-preview {
    margin-bottom: var(--space-20);
}

.avatar-emoji {
    font-size: 64px;
    line-height: 1;
    margin-bottom: var(--space-16);
}

.item-info {
    flex: 1;
    margin-bottom: var(--space-20);
}

.item-name {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin: 0 0 var(--space-8) 0;
    font-family: var(--font-family-base);
}

.item-message {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    margin: 0 0 var(--space-12) 0;
    font-style: italic;
    line-height: var(--line-height-normal);
    font-family: var(--font-family-base);
}

.item-status {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-primary);
    font-family: var(--font-family-base);
}

.item-action-btn {
    background: var(--color-primary);
    color: var(--color-btn-primary-text);
    border: none;
    padding: var(--space-12) var(--space-24);
    border-radius: var(--radius-lg);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    font-family: var(--font-family-base);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-standard);
    min-width: 120px;
}

.item-action-btn:hover:not(:disabled) {
    background: var(--color-primary-hover);
    transform: scale(1.05);
}

.item-action-btn:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.item-action-btn.current {
    background: var(--color-success);
}

.item-action-btn.owned {
    background: var(--color-teal-300);
}

.item-action-btn.locked,
.item-action-btn.insufficient {
    background: var(--color-gray-400);
    cursor: not-allowed;
}

.item-action-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Inventory Styles */
.inventory-sections {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-32);
}

.inventory-section h3 {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin-bottom: var(--space-20);
    font-family: var(--font-family-base);
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tight);
}

.current-selection {
    background: var(--color-surface);
    border: 2px solid var(--color-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-24);
    text-align: center;
    margin-bottom: var(--space-24);
}

.current-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-12);
}

.current-emoji {
    font-size: 48px;
    line-height: 1;
}

.current-name {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    font-family: var(--font-family-base);
}

.current-message {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    font-style: italic;
    font-family: var(--font-family-base);
}

.owned-items {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: var(--space-16);
}

.inventory-item {
    background: var(--color-surface);
    border: 2px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    padding: var(--space-16);
    text-align: center;
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-standard);
}

.inventory-item:hover {
    border-color: var(--color-primary);
    transform: scale(1.05);
}

.inventory-item:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.inventory-item.current {
    border-color: var(--color-success);
    background: rgba(var(--color-success-rgb), 0.05);
}

.inventory-emoji {
    font-size: var(--font-size-4xl);
    line-height: 1;
    margin-bottom: var(--space-8);
}

.inventory-name {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text);
    font-family: var(--font-family-base);
}

/* Modal Styles */

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-24);
    border-bottom: 1px solid var(--color-border);
}

.modal-header h3 {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    margin: 0;
    font-family: var(--font-family-base);
    line-height: var(--line-height-tight);
    letter-spacing: var(--letter-spacing-tight);
}

.modal-close {
    background: none;
    border: none;
    font-size: var(--font-size-3xl);
    color: var(--color-text-secondary);
    cursor: pointer;
    width: var(--space-32);
    height: var(--space-32);
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: var(--radius-md);
    transition: all var(--duration-fast) var(--ease-standard);
}

.modal-close:hover {
    background: var(--color-secondary);
    color: var(--color-text);
}

.modal-close:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.modal-content {
    padding: var(--space-24);
    text-align: center;
}

.purchase-avatar-preview {
    margin-bottom: var(--space-20);
}

.large-emoji {
    font-size: 80px;
    line-height: 1;
}

.purchase-message {
    font-size: var(--font-size-lg);
    color: var(--color-text-secondary);
    font-style: italic;
    margin-bottom: var(--space-20);
    font-family: var(--font-family-base);
}

.cost-display {
    display: flex;
    justify-content: center;
    align-items: baseline;
    gap: var(--space-8);
    margin-bottom: var(--space-20);
}

.cost-amount {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
    font-family: var(--font-family-base);
}

.cost-currency {
    font-size: var(--font-size-xl);
    color: var(--color-text-secondary);
    font-family: var(--font-family-base);
}

.modal-actions {
    display: flex;
    gap: var(--space-12);
    padding: var(--space-24);
    border-top: 1px solid var(--color-border);
    justify-content: flex-end;
}

.btn {
    padding: var(--space-12) var(--space-24);
    border-radius: var(--radius-lg);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    font-family: var(--font-family-base);
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-standard);
    border: none;
}

.btn:focus-visible {
    outline: none;
    box-shadow: var(--focus-ring);
}

.btn.primary {
    background: var(--color-primary);
    color: var(--color-btn-primary-text);
}

.btn.primary:hover {
    background: var(--color-primary-hover);
}

.btn.secondary {
    background: var(--color-secondary);
    color: var(--color-text);
}

.btn.secondary:hover {
    background: var(--color-secondary-hover);
}

/* Toast Notifications */
.toast-container {
    position: fixed;
    top: var(--space-20);
    right: var(--space-20);
    z-index: 2000;
    pointer-events: none;
}

.toast-message {
    background: var(--color-primary);
    color: var(--color-btn-primary-text);
    padding: var(--space-16) var(--space-20);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-12);
    box-shadow: var(--shadow-lg);
    font-weight: var(--font-weight-semibold);
    font-family: var(--font-family-base);
    animation: slideIn var(--duration-normal) var(--ease-standard);
    pointer-events: all;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Coming Soon Placeholder */
.coming-soon {
    text-align: center;
    padding: 80px var(--space-20);
    font-size: var(--font-size-3xl);
    color: var(--color-text-secondary);
    font-family: var(--font-family-base);
}

/* Responsive Design */
@media (max-width: 768px) {
    .user-stats {
        gap: var(--space-24);
    }
    
    .department-buttons {
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    
    .department-buttons::-webkit-scrollbar {
        display: none;
    }
    
    .items-grid {
        grid-template-columns: 1fr;
        gap: var(--space-16);
    }
    
    .inventory-sections {
        grid-template-columns: 1fr;
        gap: var(--space-32);
    }
    
    .store-title {
        font-size: var(--font-size-3xl);
    }
    
    .motivational-quote {
        font-size: var(--font-size-lg);
    }
    
    .customization-header {
        padding: var(--space-16);
    }
    
    .store-content {
        padding: var(--space-24) var(--space-16);
    }
    
    .department-nav {
        padding: 0 var(--space-16);
    }
}

/* Mobile Portrait (480px and below) */
@media (max-width: 480px) {
    .customization-header {
        padding: var(--space-12);
    }
    
    .store-title {
        font-size: var(--font-size-2xl);
    }
    
    .motivational-quote {
        font-size: var(--font-size-md);
        margin-bottom: var(--space-16);
    }
    
    .user-stats {
        gap: var(--space-16);
        margin-bottom: var(--space-16);
    }
    
    .stat-value {
        font-size: var(--font-size-2xl);
    }
    
    .department-btn {
        padding: var(--space-12) var(--space-16);
        font-size: var(--font-size-base);
    }
    
    .store-content {
        padding: var(--space-16) var(--space-12);
    }
    
    .department-header {
        margin-bottom: var(--space-24);
    }
    
    .department-header h2 {
        font-size: var(--font-size-2xl);
    }
    
    .department-header p {
        font-size: var(--font-size-lg);
    }
    
    .category-filters {
        gap: var(--space-8);
        margin-bottom: var(--space-24);
    }
    
    .category-filter {
        padding: var(--space-8) var(--space-16);
        font-size: var(--font-size-sm);
    }
    
    .items-grid {
        gap: var(--space-12);
        margin-bottom: var(--space-24);
    }
    
    .store-item {
        padding: var(--space-16);
        min-height: 240px;
    }
    
    .avatar-emoji {
        font-size: 48px;
        margin-bottom: var(--space-12);
    }
    
    .item-name {
        font-size: var(--font-size-lg);
    }
    
    .item-message {
        font-size: var(--font-size-sm);
    }
    
    .item-action-btn {
        padding: var(--space-10) var(--space-20);
        font-size: var(--font-size-sm);
        min-width: 100px;
    }
    
    .inventory-sections {
        gap: var(--space-24);
    }
    
    .owned-items {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: var(--space-12);
    }
    
    .inventory-item {
        padding: var(--space-12);
    }
    
    .inventory-emoji {
        font-size: var(--font-size-2xl);
        margin-bottom: var(--space-4);
    }
    
    .inventory-name {
        font-size: var(--font-size-xs);
    }
    
    .modal {
        width: 95%;
        max-height: 90vh;
    }
    
    .modal-header,
    .modal-content,
    .modal-actions {
        padding: var(--space-16);
    }
    
    .large-emoji {
        font-size: 64px;
    }
    
    .cost-amount {
        font-size: var(--font-size-3xl);
    }
    
    .cost-currency {
        font-size: var(--font-size-lg);
    }
    
    .coming-soon {
        padding: var(--space-32) var(--space-16);
        font-size: var(--font-size-xl);
    }
}
